name: Repository Sync - Custom Commit with Add/Delete Only

on:
  workflow_dispatch:
    inputs:
      source_repo:
        description: 'æºä»“åº“åœ°å€ (æ ¼å¼: owner/repo)'
        required: true
        default: 'owner/source-repo'
      target_repo:
        description: 'ç›®æ ‡ä»“åº“åœ°å€ (æ ¼å¼: owner/repo)'
        required: true
        default: 'owner/target-repo'
      source_branch:
        description: 'æºåˆ†æ”¯å'
        required: true
        default: 'main'
      target_branch:
        description: 'ç›®æ ‡åˆ†æ”¯å'
        required: true
        default: 'main'
      commit_hashes:
        description: 'è¦åŒæ­¥çš„æäº¤å“ˆå¸Œï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰'
        required: true
        default: '75fef37dde7c3cbcde63ae7542f115fb04d9ee70,fa957cbe93c6260f4968cf3d01ec3974bcd49ff8,5a3d762db366d870e8959c143dc7037c51450675'
      commit_name:
        description: 'è‡ªå®šä¹‰æäº¤åï¼ˆæäº¤ä¿¡æ¯æ ‡é¢˜ï¼‰'
        required: true
        default: 'mozi9: åŒæ­¥æ–‡ä»¶å˜æ›´'
      commit_description:
        description: 'è‡ªå®šä¹‰æäº¤æè¿°ï¼ˆå¯é€‰ï¼‰'
        required: false
        default: ''
      commit_author_name:
        description: 'æäº¤ä½œè€…åç§°'
        required: true
        default: 'mozi9'
      commit_author_email:
        description: 'æäº¤ä½œè€…é‚®ç®±'
        required: true
        default: 'mozi9@github.com'
      max_commits:
        description: 'æœ€å¤§åŒæ­¥æäº¤æ•°é‡'
        required: true
        default: '50'

env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  sync-repository:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout target repository
      uses: actions/checkout@v4
      with:
        repository: ${{ github.event.inputs.target_repo }}
        token: ${{ secrets.Mozi9_PAT }}
        ref: ${{ github.event.inputs.target_branch }}
        fetch-depth: 0

    - name: Add source repository as remote
      run: |
        echo "ğŸ”— æ·»åŠ æºä»“åº“è¿œç¨‹åœ°å€..."
        git remote add source-repo https://github.com/${{ github.event.inputs.source_repo }}.git
        git fetch source-repo ${{ github.event.inputs.source_branch }} --depth=100
        echo "âœ… æºä»“åº“æ·»åŠ å®Œæˆ"

    - name: Setup Git config
      run: |
        echo "âš™ï¸ é…ç½® Git èº«ä»½ä¿¡æ¯..."
        git config --global user.name "${{ github.event.inputs.commit_author_name }}"
        git config --global user.email "${{ github.event.inputs.commit_author_email }}"
        git config --global push.default simple
        git config --global pull.rebase false
        echo "âœ… Git é…ç½®å®Œæˆ"
        echo "   ä½œè€…: ${{ github.event.inputs.commit_author_name }} <${{ github.event.inputs.commit_author_email }}>"

    - name: Parse and validate commit hashes
      id: parse_commits
      run: |
        echo "ğŸ” éªŒè¯æäº¤å“ˆå¸Œ..."
        # æ¸…ç†è¾“å…¥ï¼Œç§»é™¤ç©ºæ ¼å’Œæ¢è¡Œ
        CLEAN_HASHES=$(echo '${{ github.event.inputs.commit_hashes }}' | tr -d '[:space:]' | tr ',' '\n' | grep -v '^$')
        
        # éªŒè¯æ¯ä¸ªæäº¤å“ˆå¸Œæ˜¯å¦å­˜åœ¨
        VALID_COMMITS=""
        INVALID_COMMITS=""
        COMMIT_COUNT=0
        
        for hash in $CLEAN_HASHES; do
          if git rev-parse --verify "$hash" >/dev/null 2>&1; then
            COMMIT_SUBJECT=$(git log -1 --format="%s" "$hash" 2>/dev/null || echo "æ— æ³•è·å–æäº¤ä¿¡æ¯")
            echo "âœ… æäº¤æœ‰æ•ˆ: $hash - $COMMIT_SUBJECT"
            VALID_COMMITS="$VALID_COMMITS$hash"$'\n'
            COMMIT_COUNT=$((COMMIT_COUNT + 1))
          else
            echo "âŒ æäº¤æ— æ•ˆ: $hash"
            INVALID_COMMITS="$INVALID_COMMITS$hash"$'\n'
          fi
        done
        
        if [ $COMMIT_COUNT -eq 0 ]; then
          echo "âŒ é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„æäº¤å“ˆå¸Œ"
          exit 1
        fi
        
        # é™åˆ¶æäº¤æ•°é‡
        MAX_COMMITS=${{ github.event.inputs.max_commits }}
        if [ $COMMIT_COUNT -gt $MAX_COMMITS ]; then
          echo "âš ï¸ è­¦å‘Š: æäº¤æ•°é‡ $COMMIT_COUNT è¶…è¿‡æœ€å¤§é™åˆ¶ $MAX_COMMITSï¼Œå°†åªå¤„ç†å‰ $MAX_COMMITS ä¸ªæäº¤"
          VALID_COMMITS=$(echo "$VALID_COMMITS" | head -n $MAX_COMMITS)
          COMMIT_COUNT=$MAX_COMMITS
        fi
        
        # ä¿å­˜æœ‰æ•ˆæäº¤åˆ°æ–‡ä»¶
        echo "$VALID_COMMITS" > /tmp/valid_commits.txt
        
        echo "ğŸ“Š æäº¤éªŒè¯å®Œæˆ:"
        echo "  æœ‰æ•ˆæäº¤: $COMMIT_COUNT ä¸ª"
        if [ -n "$INVALID_COMMITS" ]; then
          echo "  æ— æ•ˆæäº¤: $(echo "$INVALID_COMMITS" | grep -c .) ä¸ª"
        fi
        
        echo "commit_count=$COMMIT_COUNT" >> $GITHUB_OUTPUT

    - name: Collect and deduplicate files from source commits
      id: collect_files
      run: |
        echo "ğŸ“ ä»æºæäº¤ä¸­æ”¶é›†æ–‡ä»¶å¹¶å»é‡..."
        
        # ä½¿ç”¨å…³è”æ•°ç»„å»é‡ï¼ˆåé¢çš„æäº¤è¦†ç›–å‰é¢çš„ï¼‰
        declare -A ALL_FILES_HASH
        declare -A FILE_TO_COMMIT_MAP
        declare -A DELETED_FILES_HASH
        
        COMMITS=$(cat /tmp/valid_commits.txt)
        
        # æŒ‰æäº¤é¡ºåºå¤„ç†æ–‡ä»¶
        for COMMIT in $COMMITS; do
          echo "ğŸ“ å¤„ç†æäº¤: $COMMIT"
          
          # è·å–è¯¥æäº¤çš„æ‰€æœ‰å˜æ›´æ–‡ä»¶
          COMMIT_FILES=$(git show --name-only --format= "$COMMIT" 2>/dev/null | grep -v '^$' || true)
          
          # è·å–è¯¥æäº¤ä¸­åˆ é™¤çš„æ–‡ä»¶
          DELETED_IN_COMMIT=$(git show "$COMMIT" --name-only --diff-filter=D --format= 2>/dev/null || true)
          if [ -n "$DELETED_IN_COMMIT" ]; then
            for file in $DELETED_IN_COMMIT; do
              DELETED_FILES_HASH["$file"]=1
              # ä»æ–‡ä»¶é›†åˆä¸­ç§»é™¤è¢«åˆ é™¤çš„æ–‡ä»¶
              unset ALL_FILES_HASH["$file"]
              unset FILE_TO_COMMIT_MAP["$file"]
            done
          fi
          
          # å¤„ç†æ–°å¢å’Œä¿®æ”¹çš„æ–‡ä»¶
          AM_FILES=$(git show "$COMMIT" --name-only --diff-filter=AM --format= 2>/dev/null || true)
          if [ -n "$AM_FILES" ]; then
            for file in $AM_FILES; do
              # è·³è¿‡åˆ é™¤çš„æ–‡ä»¶
              if [ -n "${DELETED_FILES_HASH[$file]}" ]; then
                continue
              fi
              # è®°å½•æ–‡ä»¶åŠå…¶å¯¹åº”çš„æœ€æ–°æäº¤
              ALL_FILES_HASH["$file"]=1
              FILE_TO_COMMIT_MAP["$file"]=$COMMIT
            done
          fi
        done
        
        # ä¿å­˜ç»“æœ
        printf "%s\n" "${!ALL_FILES_HASH[@]}" | sort > /tmp/all_files.txt
        printf "%s\n" "${!DELETED_FILES_HASH[@]}" | sort > /tmp/deleted_files.txt
        
        # ä¿å­˜æ–‡ä»¶åˆ°æäº¤çš„æ˜ å°„
        for file in "${!FILE_TO_COMMIT_MAP[@]}"; do
          echo "$file:${FILE_TO_COMMIT_MAP[$file]}" >> /tmp/file_commit_map.txt
        done
        
        echo "ğŸ“Š æ–‡ä»¶æ”¶é›†å®Œæˆ:"
        echo "  ä¿ç•™æ–‡ä»¶: ${#ALL_FILES_HASH[@]} ä¸ª"
        echo "  åˆ é™¤æ–‡ä»¶: ${#DELETED_FILES_HASH[@]} ä¸ª"

    - name: Copy files from source commits
      id: copy_files
      run: |
        echo "ğŸ“„ ä»æºæäº¤å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡ä»“åº“..."
        
        ALL_FILES=$(cat /tmp/all_files.txt 2>/dev/null || true)
        
        if [ -n "$ALL_FILES" ]; then
          COPY_COUNT=0
          FAIL_COUNT=0
          
          for file in $ALL_FILES; do
            # ä»æ–‡ä»¶æ˜ å°„ä¸­è·å–å¯¹åº”çš„æäº¤
            COMMIT=$(grep "^$file:" /tmp/file_commit_map.txt 2>/dev/null | cut -d: -f2)
            
            if [ -z "$COMMIT" ]; then
              echo "âš ï¸ è­¦å‘Š: æœªæ‰¾åˆ°æ–‡ä»¶ $file çš„æäº¤æ˜ å°„"
              FAIL_COUNT=$((FAIL_COUNT + 1))
              continue
            fi
            
            if git show "$COMMIT":"$file" >/dev/null 2>&1; then
              echo "ğŸ“‹ å¤åˆ¶: $file"
              mkdir -p "$(dirname "$file")"
              
              # å¤åˆ¶æ–‡ä»¶å†…å®¹
              if git show "$COMMIT":"$file" > "$file" 2>/dev/null; then
                COPY_COUNT=$((COPY_COUNT + 1))
              else
                echo "âŒ å¤åˆ¶å¤±è´¥: $file"
                FAIL_COUNT=$((FAIL_COUNT + 1))
              fi
            else
              echo "âŒ æ— æ³•è·å–æ–‡ä»¶: $file"
              FAIL_COUNT=$((FAIL_COUNT + 1))
            fi
          done
          
          echo "âœ… æ–‡ä»¶å¤åˆ¶å®Œæˆ:"
          echo "  æˆåŠŸ: $COPY_COUNT ä¸ªæ–‡ä»¶"
          echo "  å¤±è´¥: $FAIL_COUNT ä¸ªæ–‡ä»¶"
          
          echo "copy_count=$COPY_COUNT" >> $GITHUB_OUTPUT
          echo "fail_count=$FAIL_COUNT" >> $GITHUB_OUTPUT
        else
          echo "â„¹ï¸ æ²¡æœ‰æ–‡ä»¶éœ€è¦å¤åˆ¶"
          echo "copy_count=0" >> $GITHUB_OUTPUT
          echo "fail_count=0" >> $GITHUB_OUTPUT
        fi

    - name: Add all copied files to git
      id: add_files
      run: |
        echo "ğŸ“¦ æ·»åŠ æ‰€æœ‰å¤åˆ¶çš„æ–‡ä»¶åˆ° git æš‚å­˜åŒº..."
        
        # æ£€æŸ¥æ˜¯å¦æœ‰æ–‡ä»¶è¢«å¤åˆ¶
        if [ -s /tmp/all_files.txt ]; then
          echo "æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº..."
          git add -A
          
          # éªŒè¯æ·»åŠ çš„æ–‡ä»¶æ•°é‡
          ADDED_COUNT=$(git diff --cached --name-only | wc -l)
          echo "âœ… å·²æ·»åŠ  $ADDED_COUNT ä¸ªæ–‡ä»¶åˆ°æš‚å­˜åŒº"
          echo "added_count=$ADDED_COUNT" >> $GITHUB_OUTPUT
        else
          echo "â„¹ï¸ æ²¡æœ‰æ–‡ä»¶éœ€è¦æ·»åŠ "
          echo "added_count=0" >> $GITHUB_OUTPUT
        fi

    - name: Create commit with file changes
      id: create_commit
      run: |
        echo "ğŸ’¾ åˆ›å»ºæ–‡ä»¶å˜æ›´æäº¤..."
        
        # æ£€æŸ¥æ˜¯å¦æœ‰æ–‡ä»¶å˜æ›´
        if git diff --cached --quiet; then
          echo "â„¹ï¸ æ²¡æœ‰æ–‡ä»¶å˜æ›´éœ€è¦æäº¤"
          echo "has_changes=false" >> $GITHUB_OUTPUT
        else
          echo "ğŸ“ æ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´ï¼Œå‡†å¤‡æäº¤..."
          echo "has_changes=true" >> $GITHUB_OUTPUT
          
          # å‡†å¤‡æäº¤ä¿¡æ¯
          COMMIT_NAME="${{ github.event.inputs.commit_name }}"
          COMMIT_DESC="${{ github.event.inputs.commit_description }}"
          AUTHOR_NAME="${{ github.event.inputs.commit_author_name }}"
          AUTHOR_EMAIL="${{ github.event.inputs.commit_author_email }}"
          
          if [ -z "$COMMIT_NAME" ]; then
            COMMIT_NAME="åŒæ­¥æ–‡ä»¶å˜æ›´"
          fi
          
          COMMIT_MSG="$COMMIT_NAME"
          if [ -n "$COMMIT_DESC" ]; then
            COMMIT_MSG="$COMMIT_MSG"$'\n\n'"$COMMIT_DESC"
          fi
          
          # åˆ›å»ºæäº¤
          git commit -m "$COMMIT_MSG" --author="$AUTHOR_NAME <$AUTHOR_EMAIL>"
          echo "âœ… æ–‡ä»¶å˜æ›´æäº¤åˆ›å»ºå®Œæˆ"
          echo "   æäº¤å“ˆå¸Œ: $(git rev-parse HEAD)"
          echo "   ä½œè€…ä¿¡æ¯: $AUTHOR_NAME <$AUTHOR_EMAIL>"
        fi

    - name: Delete marked files
      id: delete_files
      run: |
        echo "ğŸ—‘ï¸ å¤„ç†æ ‡è®°ä¸ºåˆ é™¤çš„æ–‡ä»¶..."
        
        DELETED_FILES=$(cat /tmp/deleted_files.txt 2>/dev/null || true)
        AUTHOR_NAME="${{ github.event.inputs.commit_author_name }}"
        AUTHOR_EMAIL="${{ github.event.inputs.commit_author_email }}"
        
        if [ -n "$DELETED_FILES" ]; then
          DEL_COUNT=0
          SKIP_COUNT=0
          
          for file in $DELETED_FILES; do
            if [ -e "$file" ]; then
              echo "ğŸ“‹ åˆ é™¤: $file"
              git rm "$file" >/dev/null 2>&1 || rm -rf "$file"
              DEL_COUNT=$((DEL_COUNT + 1))
            else
              echo "â„¹ï¸ è·³è¿‡(ä¸å­˜åœ¨): $file"
              SKIP_COUNT=$((SKIP_COUNT + 1))
            fi
          done
          
          if [ $DEL_COUNT -gt 0 ]; then
            git commit -m "åˆ é™¤æ ‡è®°ä¸ºåˆ é™¤çš„æ–‡ä»¶" --author="$AUTHOR_NAME <$AUTHOR_EMAIL>"
            echo "âœ… åˆ é™¤æ“ä½œå®Œæˆ:"
            echo "  å®é™…åˆ é™¤: $DEL_COUNT ä¸ªæ–‡ä»¶"
            echo "  è·³è¿‡(ä¸å­˜åœ¨): $SKIP_COUNT ä¸ªæ–‡ä»¶"
          else
            echo "â„¹ï¸ æ²¡æœ‰éœ€è¦åˆ é™¤çš„æ–‡ä»¶"
          fi
          
          echo "deleted_count=$DEL_COUNT" >> $GITHUB_OUTPUT
          echo "skipped_count=$SKIP_COUNT" >> $GITHUB_OUTPUT
        else
          echo "â„¹ï¸ æ²¡æœ‰æ ‡è®°ä¸ºåˆ é™¤çš„æ–‡ä»¶"
          echo "deleted_count=0" >> $GITHUB_OUTPUT
          echo "skipped_count=0" >> $GITHUB_OUTPUT
        fi

    - name: Push changes to target repository
      id: push_changes
      run: |
        echo "ğŸš€ å‡†å¤‡æ¨é€åˆ°ç›®æ ‡ä»“åº“..."
        
        # è·å–å½“å‰åˆ†æ”¯ä¿¡æ¯
        CURRENT_BRANCH=$(git branch --show-current)
        TARGET_REPO="${{ github.event.inputs.target_repo }}"
        TARGET_BRANCH="${{ github.event.inputs.target_branch }}"
        
        echo "ğŸ“Š æ¨é€ä¿¡æ¯:"
        echo "  ç›®æ ‡ä»“åº“: $TARGET_REPO"
        echo "  ç›®æ ‡åˆ†æ”¯: $TARGET_BRANCH"
        echo "  å½“å‰åˆ†æ”¯: $CURRENT_BRANCH"
        echo "  ä½œè€…èº«ä»½: ${{ github.event.inputs.commit_author_name }} <${{ github.event.inputs.commit_author_email }}>"
        
        # æ£€æŸ¥æ˜¯å¦æœ‰éœ€è¦æ¨é€çš„å˜æ›´
        if git diff --quiet origin/$TARGET_BRANCH $TARGET_BRANCH; then
          echo "â„¹ï¸ æ²¡æœ‰éœ€è¦æ¨é€çš„å˜æ›´"
          echo "pushed=false" >> $GITHUB_OUTPUT
        else
          echo "ğŸ“¤ å¼€å§‹æ¨é€å˜æ›´..."
          
          # æ˜¾ç¤ºå°†è¦æ¨é€çš„æäº¤
          echo "ğŸ“ æ¨é€çš„æäº¤:"
          git log --oneline origin/$TARGET_BRANCH..$TARGET_BRANCH
          
          # æ‰§è¡Œæ¨é€
          set +e
          git push https://${{ github.event.inputs.commit_author_name }}:${{ secrets.Mozi9_PAT }}@github.com/$TARGET_REPO.git $TARGET_BRANCH
          PUSH_EXIT_CODE=$?
          set -e
          
          if [ $PUSH_EXIT_CODE -eq 0 ]; then
            echo "âœ… æ¨é€æˆåŠŸå®Œæˆ"
            echo "pushed=true" >> $GITHUB_OUTPUT
          else
            echo "âŒ æ¨é€å¤±è´¥ï¼Œé€€å‡ºç : $PUSH_EXIT_CODE"
            echo "pushed=false" >> $GITHUB_OUTPUT
            exit $PUSH_EXIT_CODE
          fi
        fi

    - name: Generate final report
      run: |
        echo ""
        echo "ğŸ‰ åŒæ­¥æµç¨‹å®Œæˆï¼"
        echo "=================================================="
        echo "ğŸ“Š æœ€ç»ˆæ‰§è¡ŒæŠ¥å‘Š"
        echo "=================================================="
        
        # åŸºæœ¬ä¿¡æ¯
        echo "ğŸ”§ é…ç½®ä¿¡æ¯:"
        echo "   ç›®æ ‡ä»“åº“: ${{ github.event.inputs.target_repo }}"
        echo "   ç›®æ ‡åˆ†æ”¯: ${{ github.event.inputs.target_branch }}"
        echo "   æºä»“åº“: ${{ github.event.inputs.source_repo }}"
        echo "   æºåˆ†æ”¯: ${{ github.event.inputs.source_branch }}"
        echo "   ä½œè€…èº«ä»½: ${{ github.event.inputs.commit_author_name }} <${{ github.event.inputs.commit_author_email }}>"
        echo ""
        
        # æ‰§è¡Œç»Ÿè®¡
        echo "ğŸ“ˆ æ‰§è¡Œç»Ÿè®¡:"
        echo "   âœ… æœ‰æ•ˆæäº¤: ${{ steps.parse_commits.outputs.commit_count }} ä¸ª"
        echo "   ğŸ“ æ”¶é›†æ–‡ä»¶: $(cat /tmp/all_files.txt 2>/dev/null | wc -l || echo 0) ä¸ª"
        echo "   ğŸ“„ æˆåŠŸå¤åˆ¶: ${{ steps.copy_files.outputs.copy_count || 0 }} ä¸ª"
        echo "   âŒ å¤åˆ¶å¤±è´¥: ${{ steps.copy_files.outputs.fail_count || 0 }} ä¸ª"
        echo "   ğŸ“¦ å®é™…æ·»åŠ : ${{ steps.add_files.outputs.added_count || 0 }} ä¸ª"
        echo "   ğŸ—‘ï¸ å®é™…åˆ é™¤: ${{ steps.delete_files.outputs.deleted_count || 0 }} ä¸ª"
        echo "   â­ï¸ è·³è¿‡åˆ é™¤: ${{ steps.delete_files.outputs.skipped_count || 0 }} ä¸ª"
        echo ""
        
        # æ¨é€çŠ¶æ€
        echo "ğŸš€ æ¨é€çŠ¶æ€:"
        if [ "${{ steps.push_changes.outputs.pushed }}" = "true" ]; then
          echo "   âœ… å˜æ›´å·²æˆåŠŸæ¨é€åˆ°è¿œç¨‹ä»“åº“"
        else
          echo "   â„¹ï¸ æ²¡æœ‰å˜æ›´éœ€è¦æ¨é€"
        fi
        echo ""
        
        # æäº¤ä¿¡æ¯
        echo "ğŸ’¾ åˆ›å»ºçš„æäº¤:"
        if [ "${{ steps.create_commit.outputs.has_changes }}" = "true" ]; then
          git log --format="   %h %s (%an <%ae>)" -n 1 HEAD~$([[ "${{ steps.delete_files.outputs.deleted_count || 0 }}" -gt 0 ]] && echo 1 || echo 0)
        fi
        
        if [ "${{ steps.delete_files.outputs.deleted_count || 0 }}" -gt 0 ]; then
          git log --format="   %h %s (%an <%ae>)" -n 1
        fi
        echo ""
        
        # æ–‡ä»¶æ‘˜è¦
        echo "ğŸ“‹ æ–‡ä»¶å˜æ›´æ‘˜è¦:"
        if [ -s /tmp/all_files.txt ]; then
          FILE_COUNT=$(cat /tmp/all_files.txt | wc -l)
          echo "   æ–°å¢/ä¿®æ”¹æ–‡ä»¶ ($FILE_COUNT ä¸ª):"
          head -3 /tmp/all_files.txt | sed 's/^/      /'
          if [ $FILE_COUNT -gt 3 ]; then
            echo "      ... å’Œ $(($FILE_COUNT - 3)) ä¸ªæ›´å¤šæ–‡ä»¶"
          fi
        fi
        
        if [ -s /tmp/deleted_files.txt ]; then
          DEL_COUNT=$(cat /tmp/deleted_files.txt | wc -l)
          echo "   åˆ é™¤æ–‡ä»¶ ($DEL_COUNT ä¸ª):"
          head -3 /tmp/deleted_files.txt | sed 's/^/      /'
          if [ $DEL_COUNT -gt 3 ]; then
            echo "      ... å’Œ $(($DEL_COUNT - 3)) ä¸ªæ›´å¤šæ–‡ä»¶"
          fi
        fi
        echo ""
        
        # æ—¶é—´ä¿¡æ¯
        echo "â° å®Œæˆæ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')"
        echo "=================================================="
